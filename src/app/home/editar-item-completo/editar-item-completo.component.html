<div class="loader" *ngIf="statusLoadConteudo"></div>

<div class="all" *ngIf="!statusLoadConteudo" [formGroup]="form">
    <div class="conteudo2">

        <mat-card class="imagem-card">

            <img mat-card-image [defaultImage]="servapp.getDefaultImage()" [lazyLoad]="imagem" offset="100">
            <mat-card-content>

            </mat-card-content>
            <mat-card-actions>
                <form id="form1">
                    <input style="display: none;" type='file' id="imgInp" (change)="inputFile($event)" />
                    <button color="primary" mat-button (click)="onClickImagemSelecionar()">Selecionar imagem</button>

                </form>
            </mat-card-actions>
        </mat-card>

        <mat-card class="example-card" style="margin-top: 10px; text-align: center;">
            <button (click)="onClickCancelar()" color="warn" mat-button>Cancelar</button>
            <button (click)="onClickAddItem()" mat-flat-button color="primary">Salvar</button>
        </mat-card>

    </div>

    <div class="conteudo">



        <!--Tabela-->
        <div class="area-form" style="margin-top: 0px;">
            <mat-accordion>
                <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            Dados do item
                        </mat-panel-title>
                        <mat-panel-description>
                            <!--Currently I am {{panelOpenState ? 'open' : 'closed'}}-->
                        </mat-panel-description>
                    </mat-expansion-panel-header>


                    <mat-form-field appearance="outline" style="width: 75%;">
                        <mat-label>Nome do item</mat-label>
                        <input formControlName="nome" matInput placeholder="Ex. Nome do item" type="text">
                        <mat-hint></mat-hint>
                    </mat-form-field>

                    <mat-form-field appearance="outline" style="width: 22%;margin-left: 9px;">
                        <mat-label>Preço</mat-label>
                        <input formControlName="preco" matInput placeholder="0.00" type="text" matInput mask="separator.2" thousandSeparator=",">
                        <span matPrefix>R$&nbsp;</span>
                        <mat-hint></mat-hint>
                    </mat-form-field>

                    <div class="area-form">
                        <mat-form-field appearance="outline" style="width: 100%;">
                            <mat-label>Descrição</mat-label>
                            <input formControlName="descricao" matInput placeholder="Ex. Descrição do item" type="text">
                            <mat-hint></mat-hint>
                        </mat-form-field>
                    </div>

                </mat-expansion-panel>
            </mat-accordion>
        </div>
        <!--Tabela-->



        <!--Tabela-->

        <div class="area-form">
            <h2>Extras</h2>
            <mat-accordion>
                <mat-expansion-panel (closed)="panelOpenState = false">
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            Configurações do item
                        </mat-panel-title>
                        <mat-panel-description>
                            <!--Currently I am {{panelOpenState ? 'open' : 'closed'}}-->
                        </mat-panel-description>
                    </mat-expansion-panel-header>
                    <mat-list role="list">
                        <mat-list-item role="listitem">
                            <mat-slide-toggle formControlName="esconder">Esconder</mat-slide-toggle>
                        </mat-list-item>
                        <mat-list-item role="listitem">
                            <mat-slide-toggle formControlName="esgotado">Esgotado</mat-slide-toggle>
                        </mat-list-item>
                    </mat-list>
                </mat-expansion-panel>
            </mat-accordion>
        </div>
        <!--Tabela-->

        <!--Tabela-->
        <div class="area-form">
            <h2>Disponibilidade</h2>
            <mat-accordion>
                <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            Dias
                        </mat-panel-title>
                        <mat-panel-description>

                        </mat-panel-description>
                    </mat-expansion-panel-header>

                    <mat-list>

                        <mat-list-item formArrayName="disponibilidade" *ngFor="let item of form.get('disponibilidade')['controls']; let i = index">
                            <mat-slide-toggle (change)="onClickDiaDisponivel($event, diasLista[i])" [checked]="diasLista[i].status">
                                {{ diasLista[i].nome }}
                                <!--:: {{ diasLista[i].status }}-->
                            </mat-slide-toggle>
                        </mat-list-item>
                    </mat-list>

                </mat-expansion-panel>

            </mat-accordion>
        </div>
        <!--Tabela-->


        <!--Tabela-->
        <div class="area-form">
            <h2>Adicionais</h2>
            <span formArrayName="categoriaadicional" *ngFor="let item of form.get('categoriaadicional')['controls']; let i = index">

        <mat-accordion>
          <mat-expansion-panel style="margin-top: 2px;" (opened)="panelOpenState = true"
            (closed)="panelOpenState = false">
            <mat-expansion-panel-header>
              <mat-panel-title>
                {{ catsEAdcs[i].nome }}
                <span *ngIf="!catsEAdcs[i].disponivel"  class="spanDispo">INDISPONIVEL</span>
            </mat-panel-title>

            <mat-panel-description>

            </mat-panel-description>
            </mat-expansion-panel-header>

            <mat-list>
                <mat-list-item>
                    Obrigatório
                    <!-- {{ catsEAdcs[i].obrigatorio }} -->
                    <mat-slide-toggle style="margin-left: 10px;" [checked]="catsEAdcs[i].obrigatorio" (change)="onClickObrigatorio($event, catsEAdcs[i])">
                    </mat-slide-toggle>
                </mat-list-item>
            </mat-list>


            <mat-list>
                <span>
                <mat-list-item *ngFor="let adicional of catsEAdcs[i].itens; let x = index">
                  <mat-slide-toggle  (change)="onClickAdicional($event, adicional)" [checked]="adicional.status"> {{ adicional.nome }} <!--{{ adicional.status }}--> </mat-slide-toggle>
                </mat-list-item>
              </span>
                <span>
                <!--<mat-list-item>
                    Nenhum adicional desta categoria foi criado
                </mat-list-item>-->
              </span>

            </mat-list>


            </mat-expansion-panel>
            </mat-accordion>

            </span>

        </div>
        <!--Tabela-->


    </div>

    <div class="conteudo3">
        <!--Tabela-->
        <mat-accordion>
            <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        Itens catalogo
                    </mat-panel-title>
                    <mat-panel-description>

                    </mat-panel-description>
                </mat-expansion-panel-header>

                <mat-list>
                    <mat-list-item formArrayName="categoria" *ngFor="let item of form.get('categoria')['controls']; let i = index">
                        <mat-slide-toggle (change)="onClickCategoria($event, categoriasCatalogo[i])" [checked]="categoriasCatalogo[i].status">
                            {{ categoriasCatalogo[i].nome }}
                            <!---- {{categoriasCatalogo[i].status}} -->
                        </mat-slide-toggle>
                    </mat-list-item>
                </mat-list>

            </mat-expansion-panel>

        </mat-accordion>
        <!--Tabela-->

        <!--Tabela-->
        <mat-accordion style="margin-top: 10px;">
            <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false" style="margin-top: 10px;">
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        Controle de estoque
                    </mat-panel-title>
                    <mat-panel-description>

                    </mat-panel-description>
                </mat-expansion-panel-header>

                <mat-list>
                    <mat-list-item>
                        <mat-form-field appearance="outline">
                            <mat-label>Estoque mínimo</mat-label>
                            <input matInput placeholder="Ex. Quantidade mínimo estoque" type="number" formControlName="estoque_mim">
                            <mat-hint></mat-hint>
                        </mat-form-field>


                    </mat-list-item>

                    <mat-list-item style="margin-top: 29px;">


                        <mat-form-field appearance="outline">
                            <mat-label>Estoque médio</mat-label>
                            <input matInput placeholder="Ex. Quantidade médio estoque" type="number" formControlName="estoque_med">
                            <mat-hint></mat-hint>
                        </mat-form-field>

                    </mat-list-item>

                    <mat-list-item style="margin-top: 29px;">


                        <mat-form-field appearance="outline">
                            <mat-label>Qnt de retirada do estoque</mat-label>
                            <input title="Quantidade de unidades que será retirado por saida" matInput placeholder="Quantidade" type="number" formControlName="quantidade_retira">
                            <mat-hint></mat-hint>
                        </mat-form-field>

                    </mat-list-item>

                    <mat-list-item style="margin-top: 29px;">

                        <mat-form-field appearance="outline">
                            <mat-label> Unidades caixa </mat-label>
                            <input title="Quantidade de unidades que vem em uma caixa" matInput placeholder="Quantidade" type="number" formControlName="un_caixa">
                            <mat-hint></mat-hint>
                        </mat-form-field>

                    </mat-list-item>

                    <mat-list-item style="margin-top: 29px;">

                        <mat-form-field appearance="outline">
                            <mat-label> Unidades pacote </mat-label>
                            <input title="Quantidade de unidades de caixas quem vem em um pacote" matInput placeholder="Quantidade" type="number" formControlName="un_caixa_pacote">
                            <mat-hint></mat-hint>
                        </mat-form-field>

                    </mat-list-item>

                </mat-list>

            </mat-expansion-panel>

        </mat-accordion>
        <!--Tabela-->
    </div>

</div>